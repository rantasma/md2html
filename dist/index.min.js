!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n},i=function(){function e(){this.rangeMetodths=new Array,this.ranges=new Array}return e.prototype.getRanges=function(){return this.ranges},e.prototype.setRanges=function(e){var t=this;this.rangeMetodths.forEach((function(r){t.ranges.push(r.filter(e,t.ranges))}))},e.prototype.add=function(e){this.rangeMetodths.push(e)},e.prototype.addMulti=function(e){this.rangeMetodths=n(this.rangeMetodths,e)},e.prototype.removeMulti=function(e){var t=e.slice(0);this.rangeMetodths=this.rangeMetodths.filter((function(e){return t.indexOf(e.name)>=0}))},e.prototype.removeRange=function(e){var t=e.slice(0);this.ranges=this.ranges.filter((function(e){return t.indexOf(e.name)>=0}))},e.prototype.update=function(e){this.ranges=new Array,this.setRanges(e)},e.prototype.analizeBySection=function(e,t,r){for(var n=e.ranges,i=0;i<n.length;i++){var o=n[i];if(t>o.from&&t+r<o.to)return!0}},e.prototype.analizeBySectionName=function(e,t,r){var i=n(this.ranges).filter((function(t){return t.name==e}))[0];return this.analizeBySection(i,t,r)},e.prototype.analizeAll=function(e,t){for(var r=[],n=0;n<this.ranges.length;n++){var i=this.ranges[n];this.analizeBySection(i,e,t)&&r.push({name:i.name,ignore:!0})}return r},e}(),o=function(e){var t=new RegExp("^\\t*\\s*");return t.exec(e)?t.exec(e)[0].length+1:0},a=function(e,t,r,n){e=function(e,t,r,n){for(var i=e.split("\n"),a="",l=!1,s=0,u=!1,p=0,f=new RegExp("^("+r+")"),c=new RegExp("^(\\t+|\\s+)+("+r+")"),h=new RegExp("<pre>"),g=new RegExp("^$"),y=0;y<i.length;y++){var v=i[y];if(!h.test(i[y])||u||l)if(u||!f.test(v)||l)if(l&&c.test(v)&&!u){var m=o(v);m>s&&(p++,s=m,v=v.replace(c,(function(e,r,n){return"<"+t+">\n"+r+n})))}else if(g.test(v)&&l){l=!1,s=0;for(var d="",x=0;x<p;x++)d+="</"+t+">";v=d,p=0}else u&&/<\/pre>/.test(v)?u=!1:l&&/<.?pre>/.test(v)&&(v="");else l=!0,s++,p++,v=v.replace(f,(function(e,r,n){return"<"+t+">\n"+r}));else u=!0;a+=v+"\n"}return a}(e,t,r),r=new RegExp("^[\\t*\\s*]*"+r,"");for(var i=new RegExp("^<"+t+">$"),a=new RegExp("^$"),l=e.split("\n"),s="",u=!1,p=0;p<l.length;p++){var f=l[p];i.test(f)&&0==u?(u=!0):a.test(f)&&u?(u=!1,0):u&&r.test(f)?f=f.replace(r,"<li>$1</li>"):u&&(i.test(f)?1:0),s+=f+"\n"}return s};function l(e){switch(!0){case":"==e[0]&&":"==e.slice(-1)[0]:return"center";case":"==e[0]:return"left";case":"==e.slice(-1)[0]:return"right";default:return""}}var s=function(e){for(var t=e.split("\n"),r=!1,n=new RegExp("^`{3}(.*)","m"),i=new RegExp("^`{3}(.*)","m"),o="",a=0;a<t.length;a++){var l=t[a];n.test(l)&&!r?(l=l.replace(n,"<pre>$1"),r=!0):i.test(l)?(l=l.replace(n,"</pre>$1"),r=!1):r&&(l=" "+l),o+=l+"\n"}return o},u=function(e){for(var t=e.split("\n"),r=!1,n=new RegExp("^(\\t|\\s{4})(.+)","m"),i=new RegExp("^$","g"),o="",a=0;a<t.length;a++){var l=t[a];n.test(l)&&!r?(l="<pre>\n "+l,r=!0):i.test(l)&&r?(l="</pre>\n",r=!1):r&&(l=" "+l),o+=l+"\n"}return o},p=[{name:"codeBlocks",priority:0,filter:function(e,t){return e=s(e),e=u(e),t.setRanges(e),e}},{name:"tables",priority:1,filter:function(e){try{var t=function(e){var t,r=new RegExp("(\n\\|(.*)\\|\n)((\n|-|\\|)\\s*\\W*-{3,}\\W*\\s*\\|)\n","g");return e=e.replace(r,(function(e,r,n,i,o){var a="\n<table>\n";return a+=function(e){var t=e.filter((function(e){return""!=e.trim()})).map((function(e){return e.trim()})),r="<thead>\n<tr>\n";return t.forEach((function(e){r+="<th>"+e+"</th>\n"})),r+="</tr>\n</thead>\n<tbody>\n"}(e.split("\n")[1].split("|")),t=e.split("\n")[2],a})),{align:t,text:e}}(e),r=t.align;return e=function(e,t){var r=new RegExp("^\\|(.*)\\|\\s*$","gm");(t=t.split("|").slice(1,-1)).length;return e=e.replace(r,(function(e,r,n,i){var o="<tr>\n",a=r.split("|").filter((function(e){return""!=e.trim()})).map((function(e){return e.trim()}));if(a.forEach((function(e,r){var n=l(t[r]);o+='<td align="'+n+'">'+e+"</td>\n"})),a.length<t.length)for(var s=0;s<t.length-a.length;s++){var u=l(t[a.length+s]);o+='<td align="'+u+'"></td>\n'}return o+="</tr>"}))}(e=function(e){var t=new RegExp("(\\|.*\\|)\n{2}","g");return e=e.replace(t,"$1\n</tbody>\n</table>\n")}(e=t.text),r)}catch(t){return e}}},{name:"Blockquote",priority:2,filter:function(e){for(var t="",r=e.split("\n"),n=!1,i=new RegExp("^>(\\s.+)","gm"),o=(new RegExp("^$","m"),0);o<r.length;o++){var a=r[o];i.test(a)&&!n?(a="\n<blockquote>\n"+a.replace(/^>\s/,""),n=!0):""==a&&n?(a="\n</blockquote>",n=!1):n&&""!=a&&(a=a.replace(/^>\s*/,"")),t+=a+"\n"}return t}},{name:"lists",priority:3,filter:function(e){try{return e=a(e,"ul","[-\\*]\\s(.*)"),e=a(e,"ol","\\d+[\\.\\)]\\s(.*)")}catch(t){return e}}},{name:"horizontalLine",priority:4,filter:function(e){return e.replace(/\n{2,}={4,}\n/g,"\n\n<hr/>\n").replace(/\n{2,}-{4,}\n/g,"\n\n<hr/>\n")}},{name:"titles",priority:5,filter:function(e){var t=new RegExp("^(#+)\\s(.+)\\n","gm");e=e.replace(t,(function(e,t,r,n,i){var o=t.length;return"<h"+o+' id="'+r.replace(/[\.*\s*]/g,"-").toLowerCase()+'">'+r+"</h"+o+">\n"}));var r=new RegExp("^(.+)\n(={3,}|-{3,})","gm");return e=e.replace(r,(function(e,t,r,n,i){var o="="==r[0]?"h1":"-"==r[0]?"h2":"p";return"<"+o+' id="'+t.replace(/[\.*\s*]/g,"-").toLowerCase()+'">'+t+"</"+o+">\n"}))}},{name:"paragraphs",priority:6,filter:function(e){for(var t=e.split("\n"),r="",n=!1,i=0;i<t.length;i++){var o=t[i];new RegExp("^[<\\s\\t]").test(o)?r+="\n"+o:n||""===o?n&&""==o?(r+="</p>\n",n=!1):r+="\n"+o:(r+="\n\n<p>"+o,n=!0)}return r}},{name:"inlineCode",priority:7,filter:function(e){var t=new RegExp("`(.*)`");return e=e.replace(t,"<code>$1</code>")}},{name:"emphasis",priority:8,filter:function(e){var t=e.replace(/(<p>.*)\*{2}(\S.*\S)\*{2}/g,"$1 <b>$2</b> "),r=(e=t.replace(/(<p>.*)_{2}(\S.*\S)_{2}/g," $1 <b>$2</b> ")).replace(/(<p>.*)[^\*]\*(\S.*\S)\*[^\*]/g," $1 <em>$2</em> "),n=(e=r.replace(/(<p>.*)[^_]_(\S.*\S)_/g," $1 <em>$2</em> ")).replace(/(<p>.*)~{2}(\S.*\S)~{2}/g,"$1 <del>$2</del>");return e=n}},{name:"images",priority:9,filter:function(e,t){var r=new RegExp("!\\[(.*)\\]\\[(.*)\\]");e=e.replace(r,(function(e,r,n,i,o){return t[n]?'<img src="'+t[n]+'" alt="'+r+'">':e}));var n=new RegExp("!\\[(.*)\\]\\((.*)\\)","g");return e.replace(n,'<img src="$2" alt="$1">')}},{name:"variables",priority:10,filter:function(e,t){var r=new RegExp("\\[(.*)\\]: (.*)","g");t.update(e);e=e.replace(r,(function(e,r,n,i,o){return t.analizeAll(i,e.length).length<=0?"":e}));return t.update(e),e}},{name:"anchors",priority:11,filter:function(e,t,r){t.update(e);var n=new RegExp("\\[(.*)\\]\\[(.*)\\]","g"),i=new RegExp("\\[(.*)\\]\\((.*)\\)","g");return e=(e=e.replace(n,(function(e,n,i,o,a){if(t.analizeAll(o,e.length).length<=0){var l=r.getVariables()[i];return l?'<a href="'+l+'">'+n+"</a>":e}return e}))).replace(i,(function(e,r,n,i,o){return t.analizeAll(i,e.length).length<=0?'<a href="'+n+'">'+r+"</a>":e})),t.update(e),e}}],f=[{name:"codeblock",filter:function(e,t){var r={name:"codeblock",ranges:[]},n=new RegExp("<pre.*>","gm"),i=new RegExp("</pre>","gm"),o=[],a=[];return e.replace(n,(function(e,t){o.push(t)})),e.replace(i,(function(e,t){a.push(t)})),o.forEach((function(e,t){r.ranges.push({from:e,to:a[t]})})),r}}],c=function(){function e(){this.variables={}}return e.prototype.getVariablesFromText=function(e){var t=this,r=new RegExp("\\[(.*)\\]: (.*)","g");e=e.replace(r,(function(e,r,n,i,o){return t.variables[r]=n,e}))},e.prototype.getVariables=function(){return this.variables},e.prototype.setVariables=function(e,t){this.variables[e]=t},e.prototype.remove=function(e){delete this.variables[e]},e}(),h=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n},g=function(){function e(e){this.text=e,this.ranges=new i,this.ranges.addMulti(f),this.variables=new c,this.filters=h(p)}return e.prototype.toHtml=function(){var e=this;this.htmlText=this.text,this.variables.getVariablesFromText(this.htmlText);for(var t=function(t){r.filters.forEach((function(r){if(r.priority==t)try{e.htmlText=r.filter(e.htmlText,e.ranges,e.variables)}catch(e){console.error("it was a problem at filter ",r.name),console.error(e)}else r.priority-1>e.filters.length&&console.error("the filter "+r.name+" has a way higher priority number. it has to be between 0 - "+(e.filters.length-1))}))},r=this,n=0;n<this.filters.length;n++)t(n);return console.log(this.ranges.getRanges()),this.htmlText},e.prototype.getHtml=function(){return this.htmlText},e.prototype.addFilter=function(e){return e.priority=null==e.priority?this.filters.length:e.priority,!!this.validateNewPriority(e.priority)&&(this.updateFilterPriority(e.priority),this.filters.push(e),this.sortFilters(),!0)},e.prototype.removeFilter=function(e){this.filters=this.filters.filter((function(t){return e!=t.name}))},e.prototype.changePriority=function(e,t){if(!this.validateNewPriority(t))return!1;var r=h(this.filters).filter((function(t,r){if(t.name==e)return 1,!0}))[0];return r.priority>t?this.updateFilterPriority(t,r.priority,!0):this.updateFilterPriority(r.priority,t,!1),this.filters.map((function(r){return r.name==e&&(r.priority=t),r})),this.sortFilters(),!0},e.prototype.sortFilters=function(){this.filters.sort((function(e,t){return e.priority-t.priority}))},e.prototype.updateFilterPriority=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=this.filters.length-1),void 0===r&&(r=!0),r="boolean"==typeof r&&r?1:-1,this.filters.map((function(n){var i=n.priority;return i>=e&&i<=t&&(n.priority+=1*r),n}))},e.prototype.validateNewPriority=function(e){return!(e<0||e>this.filters.length)||(console.error("change priority "+e+" is not valid. is has to be a number between 0 - "+this.filters.length),!1)},e}();window.Md2Html=g}]);
//# sourceMappingURL=index.min.js.map