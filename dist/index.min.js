!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var n=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n},i=function(){function e(){this.rangeMetodths=new Array,this.ranges=new Array}return e.prototype.getRanges=function(){return this.ranges},e.prototype.setRanges=function(e){var t=this;this.rangeMetodths.forEach((function(r){t.ranges.push(r.filter(e,t.ranges))}))},e.prototype.add=function(e){this.rangeMetodths.push(e)},e.prototype.addMulti=function(e){this.rangeMetodths=n(this.rangeMetodths,e)},e.prototype.removeMulti=function(e){var t=e.slice(0);this.rangeMetodths=this.rangeMetodths.filter((function(e){return t.indexOf(e.name)>=0}))},e.prototype.removeRange=function(e){var t=e.slice(0);this.ranges=this.ranges.filter((function(e){return t.indexOf(e.name)>=0}))},e.prototype.update=function(e){this.ranges=new Array,this.setRanges(e)},e.prototype.analizeBySection=function(e,t,r){for(var n=e.ranges,i=0;i<n.length;i++){var o=n[i];if(t>o.from&&t+r<o.to)return!0}},e.prototype.analizeBySectionName=function(e,t,r){var i=n(this.ranges).filter((function(t){return t.name==e}))[0];return this.analizeBySection(i,t,r)},e.prototype.analizeAll=function(e,t){for(var r=[],n=0;n<this.ranges.length;n++){var i=this.ranges[n];this.analizeBySection(i,e,t)&&r.push({name:i.name,ignore:!0})}return r},e}(),o=function(e){for(var t=e.split("\n"),r=!1,n=new RegExp("^`{3}(.*)","m"),i=new RegExp("^`{3}(.*)","m"),o="",a=0;a<t.length;a++){var l=t[a];n.test(l)&&!r?(l=l.replace(n,"<pre>$1"),r=!0):i.test(l)?(l=l.replace(n,"</pre>$1"),r=!1):r&&(l=" "+l),o+=l+"\n"}return o},a=function(e){for(var t=e.split("\n"),r=!1,n=new RegExp("^(\\t|\\s{4})(.+)","m"),i=new RegExp("^[^\\s{4,}\\t+]","g"),o="",a=0;a<t.length;a++){var l=t[a];n.test(l)&&!r?(l="<pre>\n "+l,r=!0):i.test(l)&&r?(l.replace("\n",""),l="</pre>\n\n"+l,r=!1):r&&(l=" "+l),o+=l+"\n"}return console.log(o),o};var l=[{name:"codeBlocks",priority:0,filter:function(e,t){return e=o(e),e=a(e),t.update(e),e}},{name:"tables",priority:1,filter:function(e){try{return e}catch(t){return e}}},{name:"Blockquote",priority:2,filter:function(e){for(var t="",r=e.split("\n"),n=!1,i=new RegExp("^>(\\s.+)","gm"),o=(new RegExp("^$","m"),0);o<r.length;o++){var a=r[o];i.test(a)&&!n?(a="\n<blockquote>\n"+a.replace(/^>\s/,""),n=!0):""==a&&n?(a="\n</blockquote>",n=!1):n&&""!=a&&(a=a.replace(/^>\s*/,"")),t+=a+"\n"}return t}},{name:"lists",priority:3,filter:function(e){try{return e}catch(t){return e}}},{name:"horizontalLine",priority:4,filter:function(e){return e.replace(/\n{2,}={4,}\n/g,"\n\n<hr/>\n").replace(/\n{2,}-{4,}\n/g,"\n\n<hr/>\n")}},{name:"titles",priority:5,filter:function(e){var t=new RegExp("^(#+)\\s(.+)\\n","gm");e=e.replace(t,(function(e,t,r,n,i){var o=t.length;return"<h"+o+' id="'+r.replace(/[\.*\s*]/g,"-").toLowerCase()+'">'+r+"</h"+o+">\n"}));var r=new RegExp("^(.+)\n(={3,}|-{3,})","gm");return e=e.replace(r,(function(e,t,r,n,i){var o="="==r[0]?"h1":"-"==r[0]?"h2":"p";return"<"+o+' id="'+t.replace(/[\.*\s*]/g,"-").toLowerCase()+'">'+t+"</"+o+">\n"}))}},{name:"paragraphs",priority:6,filter:function(e){for(var t=e.split("\n"),r="",n=!1,i=0;i<t.length;i++){var o=t[i];new RegExp("^[<\\s\\t]").test(o)?r+="\n"+o:n||""===o?n&&""==o?(r+="</p>\n",n=!1):r+="\n"+o:(r+="\n\n<p>"+o,n=!0)}return r}},{name:"inlineCode",priority:7,filter:function(e){var t=new RegExp("`(.*)`");return e=e.replace(t,"<code>$1</code>")}},{name:"emphasis",priority:8,filter:function(e){var t=e.replace(/(<p>.*)\*{2}(\S.*\S)\*{2}/g,"$1 <b>$2</b> "),r=(e=t.replace(/(<p>.*)_{2}(\S.*\S)_{2}/g," $1 <b>$2</b> ")).replace(/(<p>.*)[^\*]\*(\S.*\S)\*[^\*]/g," $1 <em>$2</em> "),n=(e=r.replace(/(<p>.*)[^_]_(\S.*\S)_/g," $1 <em>$2</em> ")).replace(/(<p>.*)~{2}(\S.*\S)~{2}/g,"$1 <del>$2</del>");return e=n}},{name:"images",priority:9,filter:function(e,t,r){return t.update(e),e=function(e,t,r){var n=new RegExp("!\\[(.*)\\]\\[(.*)\\]");return e=e.replace(n,(function(e,n,i,o,a){if(t.analizeAll(o,e.length).length<=0){var l=r.getVariables()[i];return l?'<img src="'+l+'" alt="'+n+'">':e}}))}(e,t,r),t.update(e),e=function(e,t){var r=new RegExp("!\\[(.*)\\]\\((.*)\\)","g");return e.replace(r,'<img src="$2" alt="$1">')}(e),t.update(e),e}},{name:"variables",priority:10,filter:function(e,t){var r=new RegExp("\\[(.*)\\]: (.*)","g");t.update(e);e=e.replace(r,(function(e,r,n,i,o){return t.analizeAll(i,e.length).length<=0?"":e}));return t.update(e),e}},{name:"anchors",priority:11,filter:function(e,t,r){t.update(e),console.log(t.getRanges());var n=new RegExp("\\[(.*)\\]\\[(.*)\\]","g"),i=new RegExp("\\[(.*)\\]\\((.*)\\)","g");return e=e.replace(n,(function(e,n,i,o,a){if(t.analizeAll(o,e.length).length<=0){console.log(o);var l=r.getVariables()[i];return l?'<a href="'+l+'">'+n+"</a>":e}return e})),t.update(e),e=e.replace(i,(function(e,r,n,i,o){return console.log(e),t.analizeAll(i,e.length).length<=0?'<a href="'+n+'">'+r+"</a>":e})),t.update(e),e}}],s=[{name:"codeblock",filter:function(e,t){var r={name:"codeblock",ranges:[]},n=new RegExp("<.*pre.*>","gm"),i=[],o=[];return e.replace(n,(function(e,t){return e.indexOf("</")>=0?o.push(t):i.push(t),e})),i.forEach((function(e,t){r.ranges.push({from:e,to:o[t]})})),r}}],u=function(){function e(){this.variables={}}return e.prototype.getVariablesFromText=function(e){var t=this,r=new RegExp("\\[(.*)\\]: (.*)","g");e=e.replace(r,(function(e,r,n,i,o){return t.variables[r]=n,e}))},e.prototype.getVariables=function(){return this.variables},e.prototype.setVariables=function(e,t){this.variables[e]=t},e.prototype.remove=function(e){delete this.variables[e]},e}(),p=function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],a=0,l=o.length;a<l;a++,i++)n[i]=o[a];return n},f=function(){function e(e){this.text=e,this.ranges=new i,this.ranges.addMulti(s),this.variables=new u,this.filters=p(l)}return e.prototype.toHtml=function(){var e=this;this.htmlText=this.text,this.variables.getVariablesFromText(this.htmlText);for(var t=function(t){r.filters.forEach((function(r){if(r.priority==t)try{e.htmlText=r.filter(e.htmlText,e.ranges,e.variables)}catch(e){console.error("it was a problem at filter ",r.name),console.error(e)}else r.priority-1>e.filters.length&&console.error("the filter "+r.name+" has a way higher priority number. it has to be between 0 - "+(e.filters.length-1))}))},r=this,n=0;n<this.filters.length;n++)t(n);return console.log(this.ranges.getRanges()),this.htmlText},e.prototype.getHtml=function(){return this.htmlText},e.prototype.addFilter=function(e){return e.priority=null==e.priority?this.filters.length:e.priority,!!this.validateNewPriority(e.priority)&&(this.updateFilterPriority(e.priority),this.filters.push(e),this.sortFilters(),!0)},e.prototype.removeFilter=function(e){this.filters=this.filters.filter((function(t){return e!=t.name}))},e.prototype.changePriority=function(e,t){if(!this.validateNewPriority(t))return!1;var r=p(this.filters).filter((function(t,r){if(t.name==e)return 1,!0}))[0];return r.priority>t?this.updateFilterPriority(t,r.priority,!0):this.updateFilterPriority(r.priority,t,!1),this.filters.map((function(r){return r.name==e&&(r.priority=t),r})),this.sortFilters(),!0},e.prototype.sortFilters=function(){this.filters.sort((function(e,t){return e.priority-t.priority}))},e.prototype.updateFilterPriority=function(e,t,r){void 0===e&&(e=0),void 0===t&&(t=this.filters.length-1),void 0===r&&(r=!0),r="boolean"==typeof r&&r?1:-1,this.filters.map((function(n){var i=n.priority;return i>=e&&i<=t&&(n.priority+=1*r),n}))},e.prototype.validateNewPriority=function(e){return!(e<0||e>this.filters.length)||(console.error("change priority "+e+" is not valid. is has to be a number between 0 - "+this.filters.length),!1)},e}();window.Md2Html=f}]);
//# sourceMappingURL=index.min.js.map